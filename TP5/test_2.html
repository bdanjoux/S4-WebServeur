<head>
	<script>
		var canvas;
		var canvasCtx;
		var carre
		var oldDate;
		var seDeplacer=true;
		var aEteDessine=false;
		var interval1;
		
		function updateCarre(){
				canvasCtx.clearRect(0,0,canvas.width,canvas.height);
				canvasCtx.beginPath();
				canvasCtx.rect(carre.left,0,carre.width,carre.height);
				canvasCtx.fillStyle = "#ff0000";
				canvasCtx.fill();
				canvasCtx.closePath();
				oldDate= new Date();
				aEteDessine=true;
		}

		function temp(){
			if(seDeplacer=false){
				clearInterval(interval1);
			}
			else if(aEteDessine){
				curdate=new Date();
			do{
				curdate=new Date();
			}while(curdate<(oldDate+16));
			deplacerCarre();
			updateCarre();
			}
		}

		function deplacerCarre(){
			var deplacement=(new Date()-oldDate)*(10/16);
			if(carre.left>0){
				aEteDessine=false
				if(carre.left-deplacement>0){
					carre.left=carre.left-deplacement;
					seDeplacer=true;
				}
				else{
					carre.left=0;
					seDeplacer=false;
				}
			}
			else{
				aEteDessine=true;
				seDeplacer=false;
			}
		}
		
		function update(){
			updateCarre();
			deplacerCarre();	
		}
		
		function init(){
			canvas=document.getElementById('MyCanvas');
			canvasCtx=canvas.getContext('2d');
			carre = new monRect();
			carre.left=canvas.width-carre.width;
			updateCarre();
			interval1=setInterval(temp,1);

		}
		
		class monRect{
			constructor(){
				this.nouveau();
			}	
			nouveau(){
				this.left=0;
				this.height=200;
				this.width=200;
			}
		}
		
	</script>
</head>

<body onload='init()'> 
		<canvas id="MyCanvas" width="800" height="800">
		</canvas>
</body>